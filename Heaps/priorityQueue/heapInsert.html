<html>
  <body>
    <script>
      var A = [3, 1, 34, 35, 53, 40, 0];
      var heapSize = A.length - 1;
      var maxHeapify = function(A, i, heapSize) {
        var largest = 0;
        var l = 2 * i + 1;
        var r = 2 * i + 2;

        if (l <= heapSize && A[l] > A[i]) {
          largest = l; 
        } else {
          largest = i;
        }

        if (r <= heapSize && A[r] > A[largest]) {
          largest = r;
        }

        if (largest !== i) {
          var temp = A[i];
          A[i] = A[largest];
          A[largest] = temp;
          maxHeapify(A, largest, heapSize);
        }
      };

      var maxHeapify1 = function(A, i, heapSize) {
        var largest = 0;
        var l = 2 * i + 1;
        var r = 2 * i + 2;

        if (l <= heapSize && A[l] > A[i]) {
          largest = l; 
        } else {
          largest = i;
        }

        if (r <= heapSize && A[r] > A[largest]) {
          largest = r;
        }

        if (largest !== i) {
          var temp = A[i];
          A[i] = A[largest];
          A[largest] = temp;
          maxHeapify1(A, i, heapSize);
        }
      };

      var buildMaxHeap = function(A, heapSize) {
        for (var i = Math.floor(A.length / 2); i >= 0; i--) {
          maxHeapify(A, i, heapSize);
        }
      };

      var increaseKey = function(A, i, key, heapSize) {
        buildMaxHeap(A, heapSize);
        if (key < A[i]) {
          return 'key is less than current key';
        } else {
          A[i] = key;
          var par = parent(i);
            buildMaxHeap(A, heapSize);

// The below code is used in psudocode. I think just running the buildMaxHeap can actually do the trick here. Not sure if this covers all the cases but since the intention is to just make the heap maximum. So this can be used replaced. Also, complexity is O(n) but using while loop can be reduce the complexity to O(lgn).
/*          while(i > 0 && A[parent(i)] < A[i]) {
            var temp = A[parent(i)];
            A[parent(i)] = A[i];
            A[i] = temp;
            i = parent(i);
          }*/
        }
      };

      var maxHeapInsert = function(A, key, heapSize) {
        heapSize = heapSize + 1;
        A[heapSize] = Number.NEGATIVE_INFINITY;
        increaseKey(A, heapSize, key, heapSize);
      };

      maxHeapInsert(A, 48, heapSize);
      console.log(A);

      function parent(i) {
        return Math.floor(i / 2);
      };

    </script>
  </body>
</html>
